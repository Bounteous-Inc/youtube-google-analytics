(function(h,f,g){function k(a){for(var d=0;d<a.length;d++){var c;c=a[d];c=-1<c.src.indexOf("youtube.com/embed/")||-1<c.src.indexOf("youtube.com/v/")?!0:!1;if(c){c=a[d];var b=h.createElement("a");b.href=c.src;b.hostname="www.youtube.com";b.protocol=h.location.protocol;tmpPathname="/"===b.pathname.charAt(0)?b.pathname:"/"+b.pathname;var e=f.location.protocol+"%2F%2F"+f.location.hostname;-1===b.search.indexOf("enablejsapi")&&(b.search=0<b.search.length?b.search+"&enablejsapi=1":b.search="enablejsapi=1&origin="+e);-1===b.search.indexOf("origin")&&(b.search=b.search+"&origin="+e);"application/x-shockwave-flash"===c.type&&(e=h.createElement("iframe"),e.height=c.height,e.width=c.width,tmpPathname="/embed/"+c.videoId,c.parentNode.parentNode.replaceChild(e,c.parentNode),c=e);b.pathname=tmpPathname;c.src=b.href+b.hash;m(c)}}}function m(a){a.pauseFlag=!1;-1<a.src.indexOf("playlist=")&&(a.playlist=!0,a.watchToEndCount=0);new YT.Player(a,{events:{onStateChange:function(d){var c=n[d.data],b=d.target.getVideoUrl().match(/[?&]v=([^&#]*)/)[1],e;e=d.data;0===e&&a.playlist&&a.watchToEndCount++;e=a.playlist&&1===a.watchToEndCount%2||2===e&&a.pauseFlag?!1:!0;d=d.data;a.lockVideoTitle&&(a.lockVideoTitle=!1);0===d&&(a.lockVideoTitle=!0);2===d&&(a.pauseFlag=!0);1===d&&(a.pauseFlag=!1);e&&p(a,b,function(e){a.videoTitle=e;a.videoId=b;"undefined"!==typeof f.dataLayer&&!j?f.dataLayer.push({event:"youTubeTrack",attributes:{videoName:a.videoTitle,videoAction:c}}):q[c]&&("function"===typeof f.ga&&"function"===typeof f.ga.getAll&&2!==j?f.ga("send","event","Videos",c):"undefined"!==typeof f._gaq&&1!==j&&f._gaq.push(["_trackEvent","Videos",c]))})}}})}function p(a,d,c){if(a.videoId!==d&&!a.lockVideoTitle){var b=setTimeout(function(b){c(b)},5E3);r("//gdata.youtube.com/feeds/api/videos/"+d+"?v=2&alt=json",function(a){a=eval("["+a+"]");"object"===typeof a&&0<a.length&&(clearTimeout(b),c(a[0].entry.title.$t))})}else c(a.videoTitle)}function r(a,d,c,b){try{"XDomainRequest"in f&&null!==f.XDomainRequest?(b=new XDomainRequest,b.open("GET",a,1),b.onload=function(){d(b.responseText,b)},b.send()):(b=new (this.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0"),b.open("GET",a,1),b.onreadystatechange=function(){3<b.readyState&&d&&d(b.responseText,b)},b.send(c))}catch(e){f.console&&console.log(e.message)}}if("undefined"!==typeof f.onYouTubeIframeAPIReady)throw Error("There is already a function defined at window.onYouTubeIframeAPIReady; aborting LunaMetrics Google Analytics YouTube Tracking","lunametrics-youtube.js");g="object"===typeof g?g:{};var j=g.gaTypeOverride||0,q=g.defaultEventsFired||{Unstarted:!1,"Watch to End":!0,Play:!0,Pause:!0,Buffering:!1,Cueing:!1};f.onYouTubeIframeAPIReady=function(){var a=h.getElementsByTagName("iframe"),d=h.getElementsByTagName("embed");k(a);k(d)};g=h.createElement("script");g.src="//www.youtube.com/iframe_api";var l=h.getElementsByTagName("script")[0];l.parentNode.insertBefore(g,l);var n={"-1":"Unstarted","0":"Watch to End",1:"Play",2:"Pause",3:"Buffering",5:"Cueing"}})(document,window,"OPT_CONFIG_OBJ");